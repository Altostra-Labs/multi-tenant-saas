{
	"id": "multi-tenant-saas",
	"name": "multi-tenant-saas",
	"type": "altostra",
	"description": "An empty project template",
	"created": "2023-06-08T15:05:49.303Z",
	"blueprints": [
		{
			"id": "ImportedBlueprint_ez00a9z",
			"name": "Imported blueprint",
			"description": "Template to create dynamodb tables as part of bootstrap\n",
			"version": "2019-10-24",
			"resources": {
				"ServerlessSaaSSettingsTable": {
					"id": "ServerlessSaaSSettingsTable",
					"name": "Settings",
					"tableName": "ServerlessSaaS-Settings",
					"key": {
						"hash": {
							"name": "settingName",
							"type": "STRING"
						}
					},
					"aws": {
						"billingModel": "PROVISIONED",
						"throughput": {
							"readUnits": 5,
							"writeUnits": 5
						}
					},
					"type": "resource.table"
				},
				"TenantStackMappingTable": {
					"id": "TenantStackMappingTable",
					"name": "TenantStackMapping",
					"tableName": "ServerlessSaaS-TenantStackMapping",
					"key": {
						"hash": {
							"name": "tenantId",
							"type": "STRING"
						}
					},
					"aws": {
						"billingModel": "PROVISIONED",
						"throughput": {
							"readUnits": 5,
							"writeUnits": 5
						}
					},
					"type": "resource.table"
				},
				"TenantDetailsTable": {
					"id": "TenantDetailsTable",
					"name": "TenantDetails",
					"tableName": "ServerlessSaaS-TenantDetails",
					"key": {
						"hash": {
							"name": "tenantId",
							"type": "STRING"
						}
					},
					"primaryIndexes": [
						{
							"name": "ServerlessSaas-TenantConfig",
							"key": {
								"hash": {
									"name": "tenantName",
									"type": "STRING"
								}
							},
							"projection": {
								"type": "table.index.projection.include",
								"attributes": [
									"userPoolId",
									"appClientId",
									"apiGatewayUrl"
								]
							},
							"throughput": {
								"readUnits": 5,
								"writeUnits": 5
							}
						}
					],
					"aws": {
						"billingModel": "PROVISIONED",
						"throughput": {
							"readUnits": 5,
							"writeUnits": 5
						}
					},
					"type": "resource.table"
				},
				"TenantUserMappingTable": {
					"id": "TenantUserMappingTable",
					"name": "TenantUserMapping",
					"tableName": "ServerlessSaaS-TenantUserMapping",
					"key": {
						"hash": {
							"name": "tenantId",
							"type": "STRING"
						},
						"range": {
							"name": "userName",
							"type": "STRING"
						}
					},
					"primaryIndexes": [
						{
							"name": "UserName",
							"key": {
								"hash": {
									"name": "userName",
									"type": "STRING"
								},
								"range": {
									"name": "tenantId",
									"type": "STRING"
								}
							},
							"projection": {
								"type": "table.index.projection.all"
							},
							"throughput": {
								"readUnits": 5,
								"writeUnits": 5
							}
						}
					],
					"aws": {
						"billingModel": "PROVISIONED",
						"throughput": {
							"readUnits": 5,
							"writeUnits": 5
						}
					},
					"type": "resource.table"
				},
				"MyImportePool01": {
					"type": "resource.external",
					"name": "my-imported-pool",
					"externalResourceType": "resource.cognito.user-pool",
					"identifier": "arn:aws:cognito-idp:us-east-1:123456789012:userpool/us-east-1_Abcd12abc",
					"id": "MyImportePool01"
				},
				"SharedServicesAuthorizerFunction01": {
					"type": "resource.compute.function",
					"name": "SharedServicesAuthorizerFunction",
					"memory": 256,
					"timeout": 29,
					"entryPoint": "src/Resources/shared_service_authorizer.lambda_handler",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {
							"OPERATION_USERS_API_KEY": "",
							"OPERATION_USERS_APP_CLIENT": "",
							"OPERATION_USERS_USER_POOL": ""
						}
					},
					"id": "SharedServicesAuthorizerFunction01"
				},
				"BusinessServicesAuthorizerFunction01": {
					"type": "resource.compute.function",
					"name": "BusinessServicesAuthorizerFunction",
					"memory": 256,
					"timeout": 29,
					"entryPoint": "src/Resources/tenant_authorizer.lambda_handler",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {
							"OPERATION_USERS_API_KEY": "",
							"OPERATION_USERS_APP_CLIENT": "",
							"OPERATION_USERS_USER_POOL": ""
						}
					},
					"id": "BusinessServicesAuthorizerFunction01"
				},
				"AuthorizerPolicy01": {
					"type": "resource.access.policy",
					"name": "AuthorizerPolicy",
					"policyDocument": {
						"Version": "2012-10-17",
						"Statement": [
							{
								"Effect": "Allow",
								"Action": [
									"cognito-idp:List*"
								],
								"Resource": [
									{
										"Fn::Sub": "arn:aws:cognito-idp:${AWS::Region}:${AWS::AccountId}:userpool/*"
									}
								]
							}
						]
					},
					"id": "AuthorizerPolicy01"
				},
				"CreateTenantAdminUserFunction01": {
					"type": "resource.compute.function",
					"name": "CreateTenantAdminUserFunction",
					"memory": 512,
					"timeout": 6,
					"entryPoint": "src/TenantManagementService/user-management.create_tenant_admin_user",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {
							"POWERTOOLS_SERVICE_NAME": "UserManagement.CreateTenantAdmin",
							"TENANT_USER_POOL_CALLBACK_URL": "",
							"TENANT_APP_CLIENT_ID": "",
							"TENANT_USER_POOL_ID": ""
						}
					},
					"id": "CreateTenantAdminUserFunction01"
				},
				"AllowCognitoIDP": {
					"type": "resource.access.policy",
					"name": "AllowCognitoIDPPolicy",
					"policyDocument": {
						"Version": "2012-10-17",
						"Statement": [
							{
								"Effect": "Allow",
								"Action": [
									"cognito-idp:*"
								],
								"Resource": "*"
							}
						]
					},
					"id": "AllowCognitoIDP"
				},
				"CreateUserFunction01": {
					"type": "resource.compute.function",
					"name": "CreateUserFunction",
					"memory": 256,
					"timeout": 29,
					"entryPoint": "src/TenantManagementService/user-management.create_user",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {
							"POWERTOOLS_SERVICE_NAME": "UserManagement.CreateUser"
						}
					},
					"id": "CreateUserFunction01"
				},
				"UpdateUserFunction01": {
					"type": "resource.compute.function",
					"name": "UpdateUserFunction",
					"memory": 256,
					"timeout": 29,
					"entryPoint": "src/TenantManagementService/user-management.update_user",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {
							"POWERTOOLS_SERVICE_NAME": "UserManagement.UpdateUser"
						}
					},
					"id": "UpdateUserFunction01"
				},
				"DisableUserFunction01": {
					"type": "resource.compute.function",
					"name": "DisableUserFunction",
					"memory": 256,
					"timeout": 29,
					"entryPoint": "src/TenantManagementService/user-management.disable_user",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {
							"POWERTOOLS_SERVICE_NAME": "UserManagement.DisableUser"
						}
					},
					"id": "DisableUserFunction01"
				},
				"DisableUsersByTenantFunction": {
					"type": "resource.compute.function",
					"name": "DisableUsersByTenantFunction",
					"memory": 256,
					"timeout": 29,
					"entryPoint": "src/TenantManagementService/user-management.disable_user",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {
							"POWERTOOLS_SERVICE_NAME": "UserManagement.DisableUsersByTenant"
						}
					},
					"id": "DisableUsersByTenantFunction"
				},
				"EnableUsersByTenantFunction": {
					"type": "resource.compute.function",
					"name": "EnableUsersByTenantFunction",
					"memory": 256,
					"timeout": 29,
					"entryPoint": "src/TenantManagementService/user-management.enable_users_by_tenant",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {
							"POWERTOOLS_SERVICE_NAME": "UserManagement.EnableUsersByTenant"
						}
					},
					"id": "EnableUsersByTenantFunction"
				},
				"GetUserFunction": {
					"type": "resource.compute.function",
					"name": "GetUserFunction",
					"memory": 256,
					"timeout": 29,
					"entryPoint": "src/TenantManagementService/user-management.get_user",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {
							"POWERTOOLS_SERVICE_NAME": "UserManagement.GetUser"
						}
					},
					"id": "GetUserFunction"
				},
				"GetUsersFunction": {
					"type": "resource.compute.function",
					"name": "GetUsersFunction",
					"memory": 256,
					"timeout": 29,
					"entryPoint": "src/TenantManagementService/user-management.get_users",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {
							"POWERTOOLS_SERVICE_NAME": "UserManagement.GetUsers"
						}
					},
					"id": "GetUsersFunction"
				},
				"CreateTenantFunction01": {
					"type": "resource.compute.function",
					"name": "CreateTenantFunction",
					"memory": 512,
					"timeout": 29,
					"entryPoint": "src/TenantManagementService/tenant-management.create_tenant",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {
							"POWERTOOLS_SERVICE_NAME": "TenantManagement.CreateTenant"
						}
					},
					"id": "CreateTenantFunction01"
				},
				"ActivateTenantFunction01": {
					"type": "resource.compute.function",
					"name": "ActivateTenantFunction",
					"memory": 512,
					"timeout": 29,
					"entryPoint": "src/TenantManagementService/tenant-management.activate_tenant",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {
							"PROVISION_TENANT": "/provisioning/",
							"ENABLE_USERS_BY_TENANT": "/users/enable",
							"POWERTOOLS_SERVICE_NAME": "TenantManagement.ActivateTenant"
						}
					},
					"id": "ActivateTenantFunction01"
				},
				"GetTenantFunction01": {
					"type": "resource.compute.function",
					"name": "GetTenantFunction",
					"memory": 512,
					"timeout": 29,
					"entryPoint": "src/TenantManagementService/tenant-management.get_tenant",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {
							"POWERTOOLS_SERVICE_NAME": "TenantManagement.GetTenant"
						}
					},
					"id": "GetTenantFunction01"
				},
				"DeactivateTenantFunction01": {
					"type": "resource.compute.function",
					"name": "DeactivateTenantFunction",
					"memory": 512,
					"timeout": 29,
					"entryPoint": "src/TenantManagementService/tenant-management.deactivate_tenant",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {
							"DISABLE_USERS_BY_TENANT": "/users/disable",
							"DEPROVISION_TENANT": "/provisioning/",
							"POWERTOOLS_SERVICE_NAME": "TenantManagement.DeactivateTenant"
						}
					},
					"id": "DeactivateTenantFunction01"
				},
				"UpdateTenantFunction01": {
					"type": "resource.compute.function",
					"name": "UpdateTenantFunction",
					"memory": 512,
					"timeout": 29,
					"entryPoint": "src/TenantManagementService/tenant-management.update_tenant",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {
							"BASIC_TIER_API_KEY": "",
							"STANDARD_TIER_API_KEY": "",
							"PREMIUM_TIER_API_KEY": "",
							"PLATINUM_TIER_API_KEY": "",
							"POWERTOOLS_SERVICE_NAME": "TenantManagement.UpdateTenant"
						}
					},
					"id": "UpdateTenantFunction01"
				},
				"GetTenantsFunction01": {
					"type": "resource.compute.function",
					"name": "GetTenantsFunction",
					"memory": 512,
					"timeout": 29,
					"entryPoint": "src/TenantManagementService/tenant-management.get_tenants",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {}
					},
					"id": "GetTenantsFunction01"
				},
				"GetTenantConfigFunction01": {
					"type": "resource.compute.function",
					"name": "GetTenantConfigFunction",
					"memory": 512,
					"timeout": 29,
					"entryPoint": "src/TenantManagementService/tenant-management.load_tenant_config",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {}
					},
					"id": "GetTenantConfigFunction01"
				},
				"AssumeRole01": {
					"type": "resource.access.policy",
					"name": "AssumeRolePolicy",
					"policyDocument": {
						"Version": "2012-10-17",
						"Statement": [
							{
								"Effect": "Allow",
								"Action": "sts:AssumeRole",
								"Resource": "*"
							}
						]
					},
					"id": "AssumeRole01"
				},
				"RegisterTenantFunction01": {
					"type": "resource.compute.function",
					"name": "RegisterTenantFunction",
					"memory": 512,
					"timeout": 6,
					"entryPoint": "src/TenantManagementService/tenant-registration.register_tenant",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {
							"POWERTOOLS_SERVICE_NAME": "TenantRegistration.RegisterTenant",
							"BASIC_TIER_API_KEY": "",
							"STANDARD_TIER_API_KEY": "",
							"PREMIUM_TIER_API_KEY": "",
							"PLATINUM_TIER_API_KEY": "",
							"PROVISION_TENANT_RESOURCE_PATH": "/provisioning",
							"CREATE_TENANT_RESOURCE_PATH": "/tenant",
							"CREATE_TENANT_ADMIN_USER_RESOURCE_PATH": "/user/tenant-admin"
						}
					},
					"id": "RegisterTenantFunction01"
				},
				"ProvisionTenantFunction01": {
					"type": "resource.compute.function",
					"name": "ProvisionTenantFunction",
					"memory": 512,
					"timeout": 6,
					"entryPoint": "src/TenantManagementService/tenant-provisioning.provision_tenant",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {}
					},
					"id": "ProvisionTenantFunction01"
				},
				"DeProvisionTenantFunction01": {
					"type": "resource.compute.function",
					"name": "DeProvisionTenantFunction",
					"memory": 512,
					"timeout": 6,
					"entryPoint": "src/TenantManagementService/tenant-provisioning.deprovision_tenant",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {}
					},
					"id": "DeProvisionTenantFunction01"
				},
				"UpdateSettingsTableFunction01": {
					"type": "resource.compute.function",
					"name": "UpdateSettingsTableFunction",
					"memory": 512,
					"timeout": 6,
					"entryPoint": "src/custom_resources/update_settings_table.handler",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {}
					},
					"id": "UpdateSettingsTableFunction01"
				},
				"UpdateTenantStackMapTableFunction01": {
					"type": "resource.compute.function",
					"name": "UpdateTenantStackMapTableFunction",
					"memory": 512,
					"timeout": 6,
					"entryPoint": "src/custom_resources/update_tenantstackmap_table.handler",
					"runtime": "python3.9",
					"endpointUrl": {
						"enabled": false,
						"authenticated": false
					},
					"packageType": "zip",
					"layers": [],
					"policies": [
						"arn:aws:iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"
					],
					"environment": {
						"variables": {}
					},
					"id": "UpdateTenantStackMapTableFunction01"
				}
			},
			"connections": {
				"SharedServicesAuthorizerFunction01": {
					"TenantDetailsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "SharedServicesAuthorizerFunction01",
						"to": "TenantDetailsTable"
					}
				},
				"BusinessServicesAuthorizerFunction01": {
					"TenantDetailsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "BusinessServicesAuthorizerFunction01",
						"to": "TenantDetailsTable"
					}
				},
				"AuthorizerPolicy01": {
					"BusinessServicesAuthorizerFunction01": {
						"type": "connection.access.policy-attachment",
						"from": "AuthorizerPolicy01",
						"to": "BusinessServicesAuthorizerFunction01"
					},
					"SharedServicesAuthorizerFunction01": {
						"type": "connection.access.policy-attachment",
						"from": "AuthorizerPolicy01",
						"to": "SharedServicesAuthorizerFunction01"
					}
				},
				"AllowCognitoIDP": {
					"CreateTenantAdminUserFunction01": {
						"type": "connection.access.policy-attachment",
						"from": "AllowCognitoIDP",
						"to": "CreateTenantAdminUserFunction01"
					},
					"CreateUserFunction01": {
						"type": "connection.access.policy-attachment",
						"from": "AllowCognitoIDP",
						"to": "CreateUserFunction01"
					},
					"UpdateUserFunction01": {
						"type": "connection.access.policy-attachment",
						"from": "AllowCognitoIDP",
						"to": "UpdateUserFunction01"
					},
					"DisableUserFunction01": {
						"type": "connection.access.policy-attachment",
						"from": "AllowCognitoIDP",
						"to": "DisableUserFunction01"
					},
					"DisableUsersByTenantFunction": {
						"type": "connection.access.policy-attachment",
						"from": "AllowCognitoIDP",
						"to": "DisableUsersByTenantFunction"
					},
					"EnableUsersByTenantFunction": {
						"type": "connection.access.policy-attachment",
						"from": "AllowCognitoIDP",
						"to": "EnableUsersByTenantFunction"
					},
					"GetUserFunction": {
						"type": "connection.access.policy-attachment",
						"from": "AllowCognitoIDP",
						"to": "GetUserFunction"
					},
					"GetUsersFunction": {
						"type": "connection.access.policy-attachment",
						"from": "AllowCognitoIDP",
						"to": "GetUsersFunction"
					}
				},
				"CreateTenantAdminUserFunction01": {
					"TenantUserMappingTable": {
						"type": "connection.resource-access",
						"accessLevel": "write-only",
						"from": "CreateTenantAdminUserFunction01",
						"to": "TenantUserMappingTable"
					},
					"TenantDetailsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "CreateTenantAdminUserFunction01",
						"to": "TenantDetailsTable"
					}
				},
				"CreateUserFunction01": {
					"TenantUserMappingTable": {
						"type": "connection.resource-access",
						"accessLevel": "write-only",
						"from": "CreateUserFunction01",
						"to": "TenantUserMappingTable"
					},
					"TenantDetailsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "CreateUserFunction01",
						"to": "TenantDetailsTable"
					}
				},
				"UpdateUserFunction01": {
					"TenantDetailsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "UpdateUserFunction01",
						"to": "TenantDetailsTable"
					},
					"TenantUserMappingTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "UpdateUserFunction01",
						"to": "TenantUserMappingTable"
					}
				},
				"DisableUserFunction01": {
					"TenantDetailsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "DisableUserFunction01",
						"to": "TenantDetailsTable"
					},
					"TenantUserMappingTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "DisableUserFunction01",
						"to": "TenantUserMappingTable"
					}
				},
				"DisableUsersByTenantFunction": {
					"TenantDetailsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "DisableUsersByTenantFunction",
						"to": "TenantDetailsTable"
					},
					"TenantUserMappingTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "DisableUsersByTenantFunction",
						"to": "TenantUserMappingTable"
					}
				},
				"EnableUsersByTenantFunction": {
					"TenantDetailsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "EnableUsersByTenantFunction",
						"to": "TenantDetailsTable"
					},
					"TenantUserMappingTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "EnableUsersByTenantFunction",
						"to": "TenantUserMappingTable"
					}
				},
				"GetUserFunction": {
					"TenantDetailsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "GetUserFunction",
						"to": "TenantDetailsTable"
					},
					"TenantUserMappingTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "GetUserFunction",
						"to": "TenantUserMappingTable"
					}
				},
				"GetUsersFunction": {
					"TenantDetailsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "GetUsersFunction",
						"to": "TenantDetailsTable"
					},
					"TenantUserMappingTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "GetUsersFunction",
						"to": "TenantUserMappingTable"
					}
				},
				"CreateTenantFunction01": {
					"TenantDetailsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-write",
						"from": "CreateTenantFunction01",
						"to": "TenantDetailsTable"
					},
					"ServerlessSaaSSettingsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "CreateTenantFunction01",
						"to": "ServerlessSaaSSettingsTable"
					}
				},
				"ActivateTenantFunction01": {
					"TenantDetailsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-write",
						"from": "ActivateTenantFunction01",
						"to": "TenantDetailsTable"
					},
					"ServerlessSaaSSettingsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "ActivateTenantFunction01",
						"to": "ServerlessSaaSSettingsTable"
					}
				},
				"GetTenantFunction01": {
					"TenantDetailsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-write",
						"from": "GetTenantFunction01",
						"to": "TenantDetailsTable"
					},
					"ServerlessSaaSSettingsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "GetTenantFunction01",
						"to": "ServerlessSaaSSettingsTable"
					}
				},
				"DeactivateTenantFunction01": {
					"TenantDetailsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-write",
						"from": "DeactivateTenantFunction01",
						"to": "TenantDetailsTable"
					},
					"ServerlessSaaSSettingsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "DeactivateTenantFunction01",
						"to": "ServerlessSaaSSettingsTable"
					}
				},
				"UpdateTenantFunction01": {
					"TenantDetailsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-write",
						"from": "UpdateTenantFunction01",
						"to": "TenantDetailsTable"
					},
					"ServerlessSaaSSettingsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "UpdateTenantFunction01",
						"to": "ServerlessSaaSSettingsTable"
					}
				},
				"GetTenantsFunction01": {
					"TenantDetailsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-write",
						"from": "GetTenantsFunction01",
						"to": "TenantDetailsTable"
					},
					"ServerlessSaaSSettingsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "GetTenantsFunction01",
						"to": "ServerlessSaaSSettingsTable"
					}
				},
				"GetTenantConfigFunction01": {
					"TenantDetailsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-write",
						"from": "GetTenantConfigFunction01",
						"to": "TenantDetailsTable"
					},
					"ServerlessSaaSSettingsTable": {
						"type": "connection.resource-access",
						"accessLevel": "read-only",
						"from": "GetTenantConfigFunction01",
						"to": "ServerlessSaaSSettingsTable"
					}
				},
				"AssumeRole01": {
					"ActivateTenantFunction01": {
						"type": "connection.access.policy-attachment",
						"from": "AssumeRole01",
						"to": "ActivateTenantFunction01"
					},
					"CreateTenantFunction01": {
						"type": "connection.access.policy-attachment",
						"from": "AssumeRole01",
						"to": "CreateTenantFunction01"
					},
					"DeactivateTenantFunction01": {
						"type": "connection.access.policy-attachment",
						"from": "AssumeRole01",
						"to": "DeactivateTenantFunction01"
					},
					"GetTenantConfigFunction01": {
						"type": "connection.access.policy-attachment",
						"from": "AssumeRole01",
						"to": "GetTenantConfigFunction01"
					},
					"GetTenantFunction01": {
						"type": "connection.access.policy-attachment",
						"from": "AssumeRole01",
						"to": "GetTenantFunction01"
					},
					"GetTenantsFunction01": {
						"type": "connection.access.policy-attachment",
						"from": "AssumeRole01",
						"to": "GetTenantsFunction01"
					},
					"UpdateTenantFunction01": {
						"type": "connection.access.policy-attachment",
						"from": "AssumeRole01",
						"to": "UpdateTenantFunction01"
					},
					"DisableUserFunction01": {
						"type": "connection.access.policy-attachment",
						"from": "AssumeRole01",
						"to": "DisableUserFunction01"
					},
					"DisableUsersByTenantFunction": {
						"type": "connection.access.policy-attachment",
						"from": "AssumeRole01",
						"to": "DisableUsersByTenantFunction"
					},
					"EnableUsersByTenantFunction": {
						"type": "connection.access.policy-attachment",
						"from": "AssumeRole01",
						"to": "EnableUsersByTenantFunction"
					},
					"GetUserFunction": {
						"type": "connection.access.policy-attachment",
						"from": "AssumeRole01",
						"to": "GetUserFunction"
					},
					"GetUsersFunction": {
						"type": "connection.access.policy-attachment",
						"from": "AssumeRole01",
						"to": "GetUsersFunction"
					},
					"UpdateUserFunction01": {
						"type": "connection.access.policy-attachment",
						"from": "AssumeRole01",
						"to": "UpdateUserFunction01"
					},
					"ProvisionTenantFunction01": {
						"type": "connection.access.policy-attachment",
						"from": "AssumeRole01",
						"to": "ProvisionTenantFunction01"
					},
					"DeProvisionTenantFunction01": {
						"type": "connection.access.policy-attachment",
						"from": "AssumeRole01",
						"to": "DeProvisionTenantFunction01"
					},
					"UpdateSettingsTableFunction01": {
						"type": "connection.access.policy-attachment",
						"from": "AssumeRole01",
						"to": "UpdateSettingsTableFunction01"
					},
					"UpdateTenantStackMapTableFunction01": {
						"type": "connection.access.policy-attachment",
						"from": "AssumeRole01",
						"to": "UpdateTenantStackMapTableFunction01"
					}
				},
				"ProvisionTenantFunction01": {
					"TenantStackMappingTable": {
						"type": "connection.resource-access",
						"accessLevel": "write-only",
						"from": "ProvisionTenantFunction01",
						"to": "TenantStackMappingTable"
					}
				},
				"DeProvisionTenantFunction01": {
					"TenantStackMappingTable": {
						"type": "connection.resource-access",
						"accessLevel": "write-only",
						"from": "DeProvisionTenantFunction01",
						"to": "TenantStackMappingTable"
					}
				},
				"UpdateSettingsTableFunction01": {
					"ServerlessSaaSSettingsTable": {
						"type": "connection.resource-access",
						"accessLevel": "write-only",
						"from": "UpdateSettingsTableFunction01",
						"to": "ServerlessSaaSSettingsTable"
					}
				},
				"UpdateTenantStackMapTableFunction01": {
					"TenantStackMappingTable": {
						"type": "connection.resource-access",
						"accessLevel": "write-only",
						"from": "UpdateTenantStackMapTableFunction01",
						"to": "TenantStackMappingTable"
					}
				}
			},
			"metadata": {
				"designer": {
					"resourcePositions": {
						"ServerlessSaaSSettingsTable": {
							"x": 407.5000305175781,
							"y": 31.399993896484375,
							"z": 0
						},
						"TenantStackMappingTable": {
							"x": 658.6492614746094,
							"y": 31.892532348632812,
							"z": 0
						},
						"TenantDetailsTable": {
							"x": 989.5973205566406,
							"y": 27.44903564453125,
							"z": 0
						},
						"TenantUserMappingTable": {
							"x": 1269.471923828125,
							"y": 29.133018493652344,
							"z": 0
						},
						"MyImportePool01": {
							"x": 1261.0135498046875,
							"y": -72.98648834228516,
							"z": 0
						},
						"SharedServicesAuthorizerFunction01": {
							"x": 1265.0521240234375,
							"y": 175.930908203125,
							"z": 0
						},
						"BusinessServicesAuthorizerFunction01": {
							"x": 1258.9000244140625,
							"y": 116.01999999999998,
							"z": 0
						},
						"AuthorizerPolicy01": {
							"x": 1093.1051635742188,
							"y": -143.97998428344727,
							"z": 0
						},
						"CreateTenantAdminUserFunction01": {
							"x": 886.5,
							"y": 106.6199951171875,
							"z": 0
						},
						"AllowCognitoIDP": {
							"x": 875.3204956054688,
							"y": -140.40564346313477,
							"z": 0
						},
						"CreateUserFunction01": {
							"x": 896.9000244140625,
							"y": 168.01998901367188,
							"z": 0
						},
						"UpdateUserFunction01": {
							"x": 598.9000244140625,
							"y": 104.01998901367188,
							"z": 0
						},
						"DisableUserFunction01": {
							"x": 598.9000244140625,
							"y": 176.01999999999998,
							"z": 0
						},
						"DisableUsersByTenantFunction": {
							"x": 598.9000244140625,
							"y": 238.02000427246094,
							"z": 0
						},
						"EnableUsersByTenantFunction": {
							"x": 598.9000244140625,
							"y": 292.0199890136719,
							"z": 0
						},
						"GetUserFunction": {
							"x": 594.9000244140625,
							"y": 348.0199890136719,
							"z": 0
						},
						"GetUsersFunction": {
							"x": 596.9000244140625,
							"y": 404.02001953125,
							"z": 0
						},
						"CreateTenantFunction01": {
							"x": 346.8333435058594,
							"y": 101.79999542236328,
							"z": 0
						},
						"ActivateTenantFunction01": {
							"x": 343.5066223144531,
							"y": 155.3466567993164,
							"z": 0
						},
						"GetTenantFunction01": {
							"x": 344.8399658203125,
							"y": 207.34667205810547,
							"z": 0
						},
						"DeactivateTenantFunction01": {
							"x": 339.50665283203125,
							"y": 256.67999267578125,
							"z": 0
						},
						"UpdateTenantFunction01": {
							"x": 335.50665283203125,
							"y": 307.3466567993164,
							"z": 0
						},
						"GetTenantsFunction01": {
							"x": 336.8399658203125,
							"y": 355.3466796875,
							"z": 0
						},
						"GetTenantConfigFunction01": {
							"x": 334.17333984375,
							"y": 407.34666442871094,
							"z": 0
						},
						"AssumeRole01": {
							"x": 691.2307434082031,
							"y": -139.15385818481445,
							"z": 0
						},
						"RegisterTenantFunction01": {
							"x": 1083.5385131835938,
							"y": 255.46154022216797,
							"z": 0
						},
						"ProvisionTenantFunction01": {
							"x": 1079.6922912597656,
							"y": 306.48717498779297,
							"z": 0
						},
						"DeProvisionTenantFunction01": {
							"x": 1069.6922912597656,
							"y": 351.61539459228516,
							"z": 0
						},
						"UpdateSettingsTableFunction01": {
							"x": 1065.84619140625,
							"y": 400.3333511352539,
							"z": 0
						},
						"UpdateTenantStackMapTableFunction01": {
							"x": 1040.2051086425781,
							"y": 450.3333206176758,
							"z": 0
						}
					}
				}
			},
			"unsafe": false,
			"parameters": {
				"POOL_ID": {
					"paths": [
						"resources/MyImportePool01/identifier",
						"resources/CreateTenantAdminUserFunction01/environment/variables/TENANT_USER_POOL_ID"
					]
				},
				"ApiKeyOperationUsersParameter": {
					"paths": [
						"resources/SharedServicesAuthorizerFunction01/environment/variables/OPERATION_USERS_API_KEY",
						"resources/BusinessServicesAuthorizerFunction01/environment/variables/OPERATION_USERS_API_KEY"
					]
				},
				"CognitoOperationUsersUserPoolClientId": {
					"paths": [
						"resources/SharedServicesAuthorizerFunction01/environment/variables/OPERATION_USERS_APP_CLIENT",
						"resources/BusinessServicesAuthorizerFunction01/environment/variables/OPERATION_USERS_APP_CLIENT"
					]
				},
				"CognitoOperationUsersUserPoolId": {
					"paths": [
						"resources/SharedServicesAuthorizerFunction01/environment/variables/OPERATION_USERS_USER_POOL",
						"resources/BusinessServicesAuthorizerFunction01/environment/variables/OPERATION_USERS_USER_POOL"
					]
				},
				"TENANT_USER_POOL_CALLBACK_URL": {
					"paths": [
						"resources/CreateTenantAdminUserFunction01/environment/variables/TENANT_USER_POOL_CALLBACK_URL"
					]
				},
				"TENANT_APP_CLIENT_ID": {
					"paths": [
						"resources/CreateTenantAdminUserFunction01/environment/variables/TENANT_APP_CLIENT_ID"
					]
				},
				"ApiKeyBasicTierParameter": {
					"paths": [
						"resources/UpdateTenantFunction01/environment/variables/BASIC_TIER_API_KEY",
						"resources/RegisterTenantFunction01/environment/variables/BASIC_TIER_API_KEY"
					]
				},
				"ApiKeyStandardTierParameter": {
					"paths": [
						"resources/UpdateTenantFunction01/environment/variables/STANDARD_TIER_API_KEY",
						"resources/RegisterTenantFunction01/environment/variables/STANDARD_TIER_API_KEY"
					]
				},
				"ApiKeyPremiumTierParameter": {
					"paths": [
						"resources/UpdateTenantFunction01/environment/variables/PREMIUM_TIER_API_KEY",
						"resources/RegisterTenantFunction01/environment/variables/PREMIUM_TIER_API_KEY"
					]
				},
				"ApiKeyPlatinumTierParameter": {
					"paths": [
						"resources/UpdateTenantFunction01/environment/variables/PLATINUM_TIER_API_KEY",
						"resources/RegisterTenantFunction01/environment/variables/PLATINUM_TIER_API_KEY"
					]
				}
			},
			"globalEnvironmentVariables": {
				"POWERTOOLS_METRICS_NAMESPACE": "ServerlessSaaS",
				"LOG_LEVEL": "DEBUG"
			}
		}
	]
}
